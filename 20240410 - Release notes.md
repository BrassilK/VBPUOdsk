# 20240410 Release notes (April 2024)

De nieuwe JSON-schemas zijn in middels beschikbaar. De naamgeving van de berichten is aangepast zodat deze beter aansluit op de AFD-2.0 onderhouds werkwijze. Daarbij zijn ook de spaties in berichtnamen en bestandsnamen vervangen door "_". De wijzigingshistorie is gehandhaafd.

Hieronder een overzicht van de wijzigingen waarbij wordt verwezen naar de betrokken issues. In zijn algemeenheid zijn de wijzigingen die onder ["mijlpaal"/"milestone" 202404](https://github.com/dma61/VBPUOdsk/issues?q=is:issue%20milestone:%22202404%20release%22%20) vallen opgelost.

•	[#11](https://github.com/dma61/VBPUOdsk/issues/11):  afdDefinitionName heeft te weinig posities. De veldlengte is vergroot naar 80 posities.

•	[#14](https://github.com/dma61/VBPUOdsk/issues/14), [#21](https://github.com/dma61/VBPUOdsk/issues/21), [#33](https://github.com/dma61/VBPUOdsk/issues/33) : refKeys, messageID zijn verplicht gemaakt en beperkt tot 70 posities. Ze vertegenwoordigen de entiteitidentificatie in de tijd. Dat brengt met zich mee dat bijvoorbeeld de combinatie van een (functionele) schemanaam en de refKey op een pensioenschema mag niet veranderen. Bij cosmetische hernoemingen / naamswijzigingen in "partij", "schema", "cohort" enzovoort kan de bestaande refKey worden gehandhaafd. Als er echter sprake is van een inhoudelijke wijziging van bijvoorbeeld een schema dient een nieuwe refKey te worden gebruikt. P.m. als er geen functionele behoefte is aan een refKey, kan de refkey worden ingevuld met de waarde van bijvoorbeeld de RSIN, de beschrijving, enzovoort.

•	[#18](https://github.com/dma61/VBPUOdsk/issues/18): Het gegeven resending kan worden afgehandeld met het attribuut "function" met waarde: 54. Het attribuut "Resending" is verwijderd.
• [#39](https://github.com/dma61/VBPUOdsk/issues/39): Het valideren van bijvoorbeeld het overeenkomen van een bedrag uit investment.startAmount met een investment.endAmount uit een voorgaande periode is gewenst. Door pensionschemeName & description verplicht te maken wordt de controle op de aansluiting van opeenvolgende berichten eenvoudiger. Descriptions en schemaName kunnen hiervoor worden gebruikt als sleutelwaarde. Ook andere "descriptions" zijn, in aansluiting hierop, verplicht gemaakt.
•	[#32](https://github.com/dma61/VBPUOdsk/issues/32), [#34](https://github.com/dma61/VBPUOdsk/issues/34): Lengte beperkingen in attributen verwijderd op basis van AFD 2.0 richtlijnen. Er is geen veldlengte meer gespecificeerd voor booleans, decimale getallen (numbers), integers, datums en strings met een code- of optielijst.
•	[#38](https://github.com/dma61/VBPUOdsk/issues/38): Het attribuut PuvCode is toegevoegd aan party.pensionprovider. In de AFD 2.0 release van mei wordt aan deze code AFD 2.0 tabel AFDIDP gekoppeld met de unieke codes van pensioenuitvoerders. De code is verplicht omdat de party.pensionprovider altijd een NL pensioenuitvoerder is. RefKey heeft daarmee geen functie meer voor deze entiteit en vervalt.
•	[#31](https://github.com/dma61/VBPUOdsk/issues/31): per mei 2024 wordt de puvCode tabel operationeel (hangt samen met issue #38). Per april 2024 zijn ter illustratie enkele codes opgenomen.
•	[#35](https://github.com/dma61/VBPUOdsk/issues/35): Hoe de errorsectie te gebruiken met de JSON-schema's; moet het initiële bericht worden meegezonden met de errormessage? Nee, dat is niet nodig. (FAQ/WIKI item)
•	[#29](https://github.com/dma61/VBPUOdsk/issues/29): De lengte van het attribuut "error omschrijving" is onvoldoende. Lengte error omschrijving is gewijzigd naar 300 posities.
•	[#26](https://github.com/dma61/VBPUOdsk/issues/26): Maximaal aantal cohorten is vergroot naar 999.
•	[#30](https://github.com/dma61/VBPUOdsk/issues/30): Uitbreiden inhoudelijke errorcodes. Uit het JSON-schema is verwijderd: code 10 (functionele fout). Code 10 wordt vervangen door de errorcodes: 12 (Inhoudelijke fout), 13 (Volgorderlijke fout) en 14 (Data zender en ontvanger matchen niet). Deze zijn toegevoegd aan ADNFTM en de JSON-schema's.
•	[#12](https://github.com/dma61/VBPUOdsk/issues/14): Plaats geen waarde zoals "" in een optioneel attribuut; Het heeft de voorkeur om een veld niet op te nemen in het bericht als dat veld geen inhoud heeft (FAQ/WIKI).
•	[#9](https://github.com/dma61/VBPUOdsk/issues/9): Binnen SIVI AFS zijn entiteiten altijd een array, ook als deze maar één object bevatten, of maar één soort entityType (zoals pensionProvider onder party). Vanuit consistentieperspectief definiëren we daarom altijd de array, ongeacht het aantal entityType-objecten.
•	[#8](https://github.com/dma61/VBPUOdsk/issues/8): Voor de pensioenprojecties (bericht 3, 0001c) is het gewenst om per regeling en/of cohort toekomstige uitkeringsstromen mee te kunnen geven zonder dat daarvoor de regeling-cohort combinatie herhaald hoeft te worden. Om toekomstige uitkeringsstromen voor pensioenprojecties onder een pension.cohort **en/of** pension.scheme te kunnen administreren is bericht 3,  0001c uitgebreid met entity.entitytype financialTransaction.payment waarin de verwachte toekomstige uitkeringen voor een leeftijdscategorie kunnen worden vastgelegd. Deze entiteit kan zowel per regeling (schema) als per cohort worden gebruikt, zie ook [bericht-3-pensioenprojectie-0001c op de Wiki](https://github.com/dma61/VBPUOdsk/wiki/Berichten-overzicht#bericht-3-pensioenprojectie-0001c). In samenhang met deze wijziging is een aantal gegevens verplaatst van pension.scheme naar financialTransaction.payment.
•	[#6](https://github.com/dma61/VBPUOdsk/issues/6): Verbeter de herkenbaarheid van de cohorten, breid de gegevensset daartoe uit. Diverse attributen zijn toegevoegd om de herkenbaarheid van de cohorten te verbeteren.
•	[#44](https://github.com/dma61/VBPUOdsk/issues/44): Laat DOCFLNM vervallen en vervang DOCEXT door een optielijst in AOS/AFD2.0. Vanuit AFD 2.0 perspectief worden de attributen fileName en fileExtension vrije formaatstringvelden (60 posities respectievelijk 10 posities). De codelijsten DOCFLNM en DOCEXT zijn verwijderd. In het JSON-schema is de fileExtention beperkt tot: pdf, csv, txt.
•	Voortschrijdend inzicht: messageVersion (commonTechnical) is vervangen door afdDefinitionVersion (commonFunctional) wat beter voldoet aan het doel. 
•	[#3](https://github.com/dma61/VBPUOdsk/issues/3): Alle datumgerelateerde attributen zijn nu als "date" vastgelegd.
•	[#2](https://github.com/dma61/VBPUOdsk/issues/2): Alle RSIN-nummers zijn nu van het type string.
•	[#4](https://github.com/dma61/VBPUOdsk/issues/14), [#7](https://github.com/dma61/VBPUOdsk/issues/14)Kardinaliteit van cohorten in de SPR-berichten is aangepast. Pension.cohort is verplicht voor bericht 1 (0001a) en optioneel voor bericht 2 (0001b), 3 (0001c) en 2 (00002).
•	[#5](https://github.com/dma61/VBPUOdsk/issues/5), [#10](https://github.com/dma61/VBPUOdsk/issues/10), [#13](https://github.com/dma61/VBPUOdsk/issues/13), [#19](https://github.com/dma61/VBPUOdsk/issues/19): Contactgegevens zijn aangepast, zie issue [#19](https://github.com/dma61/VBPUOdsk/issues/14), waarmee dit issue is afgehandeld.
•	Aantal mogelijke ontvangers is gewijzigd naar 1. Een bericht heeft 1 ontvanger.
•	Berichten kunnen naast de genoemde partijen ook worden gestuurd naar zogenoemde LDI-partijen. Partijen ontvangen berichten steeds direct van de verzender. 

Ten slotte is naast bovenstaande wijzigingen in de documentatie van bericht 2 "Cashflow", (0001b) de tekst over prospectief en retrospectief aangepast. 

